#!/usr/bin/python
import customtkinter as ctk
from customtkinter import END, LEFT, TOP
from tkinter import messagebox, filedialog

ctk.set_appearance_mode("dark")
ctk.set_default_color_theme("dark-blue")

mainWindow = ctk.CTk()
mainWindow.minsize(1280, 1000)
mainWindow.title("New Editor")
mainWindow.geometry("1280x1000")

font_size = 14


def save_func():
    filename = filedialog.asksaveasfilename(initialdir="/",
                                            title="Select a File",
                                            filetypes=(("all files", "*"),
                                                       ("txt files", "*.txt")))
    if messagebox.askyesno("Are you sure", "do you want to proceed"):
        try:
            f = open(filename, "w")
            f.write(text_box.get("1.0", END))
        except FileNotFoundError:
            messagebox.showerror("ERROR", "file not found")
        except PermissionError:
            messagebox.showerror("ERROR", "permission denied")


def open_func():
    filename = filedialog.askopenfilename(initialdir="/",
                                          title="Select a File",
                                          filetypes=(("all files", "*"),
                                                     ("txt files", "*.txt"),
                                                     ))
    if messagebox.askyesno("Are you sure", "do you want to proceed"):
        try:
            f = open(filename)
            text_box.delete("1.0", END)
            text_box.insert("1.0", f.read())
        except FileNotFoundError:
            messagebox.showerror("ERROR", "file not found")
        except PermissionError:
            messagebox.showerror("ERROR", "permission denied")


def font_size_up():
    global font_size
    font_size = font_size + 1
    text_box.configure(font=("TkDefaultFont", font_size))


def font_size_down():
    global font_size
    if font_size > 0:
        font_size = font_size - 1
        text_box.configure(font=("TkDefaultFont", font_size))


def exit_app():
    exit()


def clear():
    text_box.delete("1.0", END)


text_box = ctk.CTkTextbox(master=mainWindow, width=1200, height=900, font=("TkDefaultFont", font_size))
text_box.pack(side=TOP, expand=True)

exit_button = ctk.CTkButton(master=mainWindow, text="exit", command=exit_app)
exit_button.pack(side=LEFT)

save_button = ctk.CTkButton(master=mainWindow, text="save", command=save_func)
save_button.pack(side=LEFT)

open_button = ctk.CTkButton(master=mainWindow, text="open", command=open_func)
open_button.pack(side=LEFT)

clear_button = ctk.CTkButton(master=mainWindow, text="clear", command=clear)
clear_button.pack(side=LEFT)

font_size_up_button = ctk.CTkButton(master=mainWindow, text="font size up", command=font_size_up)
font_size_up_button.pack(side=LEFT)

font_size_down_button = ctk.CTkButton(master=mainWindow, text="font size down", command=font_size_down)
font_size_down_button.pack(side=LEFT)

mainWindow.mainloop()
